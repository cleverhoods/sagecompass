scope: langgraph/backend/app/**
contracts: .shared/contracts.yml
component_types:
  agents:
    path: app/agents/
    domain: Agent
    purpose: Stateless, recreatable reasoning components. Own domain reasoning logic.
    contracts:
    - contract.agents
    - contract.logging
    local_instructions: app/agents/CLAUDE.md
  graphs:
    path: app/graphs/
    domain: Langgraph
    purpose: Composition-only wiring (nodes + control flow). No business logic.
    contracts:
    - contract.phases
    local_instructions: app/graphs/CLAUDE.md
  nodes:
    path: app/nodes/
    domain: Langgraph
    purpose: Orchestration units; call DI-injected deps, validate outputs, update state keys,
      route explicitly.
    contracts:
    - contract.structured_output
    - contract.state
    - contract.evidence
    - contract.logging
    local_instructions: app/nodes/CLAUDE.md
  middlewares:
    path: app/middlewares/
    domain: Langgraph
    purpose: "Policy boundary: admissibility, redaction/normalization, tool-call validation, output shaping."
    contracts:
    - contract.guardrails
    - contract.tools
    - contract.logging
    local_instructions: app/middlewares/CLAUDE.md
  schemas:
    path: app/schemas/
    domain: Langgraph
    purpose: Shared semantic data definitions not bound to a single node/agent.
    local_instructions: app/schemas/CLAUDE.md
  state:
    path: app/state/
    domain: Langgraph
    purpose: Canonical state model(s) used by graphs/nodes; authority for routing & bounded loops.
    contracts:
    - app/state/state.py
    - contract.state
    local_instructions: app/state/CLAUDE.md
  tools:
    path: app/tools/
    domain: Langchain
    purpose: Callable capabilities exposed to agents or used by nodes; typed and DI-injected.
    contracts:
    - contract.tools
    - contract.logging
    local_instructions: app/tools/CLAUDE.md
